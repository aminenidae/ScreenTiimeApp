# <!-- Powered by BMAD™ Core -->

# Story 1.1: Project Setup & Package Structure

## Status
Approved

## Story
**As a** developer,
**I want** to set up the basic iOS project structure with Swift Package Manager packages and necessary entitlements,
**so that** we have a foundation for building the screen time management app.

## Acceptance Criteria
1. Xcode project is created with proper bundle identifiers
2. Swift Package Manager workspace is configured
3. Local package structure is created:
   - `Packages/SharedModels/` - Data models and enums
   - `Packages/DesignSystem/` - **UI components and design tokens (POPULATED)**
   - `Packages/RewardCore/` - Business logic (placeholder)
   - `Packages/CloudKitService/` - CloudKit wrapper (placeholder)
   - `Packages/FamilyControlsKit/` - Family Controls wrapper (placeholder)
4. **DesignSystem package populated with core elements**:
   - Color tokens (primary, secondary, accent, semantic colors)
   - Typography tokens (heading styles, body text, captions)
   - Spacing tokens (margins, padding, grid system)
   - Common UI components (buttons, cards, progress indicators)
   - Gamification components (point displays, progress rings, badges)
   - Icon system (SF Symbols integration)
5. App Store entitlements for screen time monitoring are configured
6. Basic app structure with navigation (AppCoordinator) is implemented
7. Project compiles successfully without errors
8. **All packages compile and work together** - no placeholder dependencies in Epic 2
9. README.md created with setup instructions

## Tasks / Subtasks

- [ ] Task 1: Create Xcode Project Structure (AC: 1, 6)
  - [ ] Create new iOS project named "ScreenTimeRewards"
  - [ ] Configure bundle identifier: com.yourcompany.screentimerewards
  - [ ] Set deployment target to iOS 15.0
  - [ ] Configure App Store entitlements for Family Controls
  - [ ] Create basic app structure with AppCoordinator navigation

- [ ] Task 2: Set up Swift Package Manager Workspace (AC: 2, 3)
  - [ ] Create Package.swift for workspace configuration
  - [ ] Create local packages directory structure
  - [ ] Configure package dependencies in main app target
  - [ ] Verify workspace builds without errors

- [ ] Task 3: Create SharedModels Package (AC: 3, 8)
  - [ ] Create SharedModels package with Package.swift
  - [ ] Define basic data models (placeholder structures)
  - [ ] Export public interfaces for other packages
  - [ ] Add unit tests for basic model functionality

- [ ] Task 4: Populate DesignSystem Package (AC: 4, 6, 8)
  - [ ] Create DesignSystem package structure
  - [ ] Implement color tokens using Swift enums
  - [ ] Define typography tokens (SF Pro Display/Text)
  - [ ] Create spacing tokens and grid system
  - [ ] Build common UI components (buttons, cards)
  - [ ] Implement gamification components (progress rings, point displays)
  - [ ] Set up SF Symbols icon system
  - [ ] Create SwiftUI view modifiers for consistent styling

- [ ] Task 5: Create Placeholder Packages (AC: 3, 8)
  - [ ] Create RewardCore package with basic structure
  - [ ] Create CloudKitService package with protocol definitions
  - [ ] Create FamilyControlsKit package with framework imports
  - [ ] Ensure all packages compile without errors
  - [ ] Add placeholder implementations to prevent build failures

- [ ] Task 6: Configure App Store Entitlements (AC: 5)
  - [ ] Add Family Controls entitlement to app target
  - [ ] Configure Screen Time API capabilities
  - [ ] Set up iCloud container capabilities
  - [ ] Add Background Modes for app refresh

- [ ] Task 7: Project Documentation and Validation (AC: 7, 9)
  - [ ] Create comprehensive README.md with setup instructions
  - [ ] Document package architecture decisions
  - [ ] Verify entire project compiles successfully
  - [ ] Test package imports work correctly across targets

## Dev Notes

### Previous Story Insights
No previous story exists - this is the foundation story.

### Project Structure and Architecture [Source: architecture/unified-project-structure.md]
```
ScreenTimeRewards/
├── ScreenTimeRewards/                      # Main iOS app
│   ├── App/
│   ├── Features/
│   └── Resources/
├── WidgetExtension/                        # Widget extension
├── AppIntentsExtension/                    # Siri shortcuts
├── Packages/                               # Local Swift packages
│   ├── RewardCore/
│   ├── CloudKitService/
│   ├── FamilyControlsKit/
│   ├── SubscriptionService/
│   ├── DesignSystem/
│   ├── SharedModels/
│   └── AppIntents/
├── Tests/
├── Scripts/
├── Docs/
└── Package.swift
```

### Technology Stack Requirements [Source: architecture/tech-stack.md]
- **Language:** Swift 5.9+
- **Framework:** SwiftUI (iOS 15.0+)
- **Package Manager:** Swift Package Manager (SPM) with local packages
- **Build Tool:** Xcode Build System (Xcode 15.0+)
- **Family Controls:** iOS 15.0+ requirement for modern framework
- **State Management:** Combine + SwiftUI @Published pattern

### Design System Requirements [Source: architecture/tech-stack.md]
- **Design Tokens:** Custom Swift Enums for type-safe colors, spacing, typography
- **UI Components:** Native SwiftUI Components with zero dependencies
- **Styling:** SwiftUI native styling with view modifiers

### Coding Standards [Source: architecture/coding-standards.md]
- **Views:** PascalCase + "View" (e.g., `ChildDashboardView`)
- **ViewModels:** PascalCase + "ViewModel" (e.g., `DashboardViewModel`)
- **Protocols:** PascalCase (e.g., `ChildProfileRepository`)
- **Properties:** camelCase (e.g., `pointBalance`)
- **Type Sharing:** Define types in `SharedModels` package
- **State Management:** ViewModels own `@Published` state

### App Store Requirements [Source: PRD sections]
- **Bundle ID:** Professional bundle identifier structure
- **Entitlements:** Family Controls framework access
- **Capabilities:** iCloud containers, Background App Refresh
- **Deployment Target:** iOS 15.0 minimum

### File Locations and Naming
- Main app target: `ScreenTimeRewards/`
- Local packages: `Packages/{PackageName}/`
- Tests: `Tests/{PackageName}Tests/`
- Package configuration: Root level `Package.swift`
- Documentation: `README.md` at root level

### Technical Constraints
- **iOS Version:** 15.0+ required (Family Controls framework dependency)
- **Architecture:** Client-heavy with CloudKit serverless backend
- **Dependencies:** Prefer zero external dependencies, use native frameworks
- **Package Management:** Local packages only, no external SPM dependencies in initial setup

## Testing

### Test Location [Source: architecture/testing-strategy.md]
- Unit tests in `Tests/` directory with package-specific subdirectories
- Test target configuration per package

### Testing Standards [Source: architecture/testing-strategy.md]
- **Framework:** XCTest native framework
- **Pyramid:** 70% Unit, 20% Integration, 10% E2E
- **Naming:** Descriptive test method names (e.g., `testCalculatePoints_30MinutesAt20PerHour_Returns10Points`)
- **Coverage:** All public package interfaces must have unit tests

### Specific Testing Requirements
- Verify package imports work correctly
- Test DesignSystem components render properly in SwiftUI previews
- Validate project compilation across all targets and configurations
- Test entitlements are correctly configured

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-24 | 1.0 | Initial story creation from Epic 1 requirements | Bob (Scrum Master) |

## Dev Agent Record

*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled during development*

### Debug Log References
*To be filled during development*

### Completion Notes List
*To be filled during development*

### File List
*To be filled during development*

## QA Results

*This section will be populated by QA Agent after story completion*